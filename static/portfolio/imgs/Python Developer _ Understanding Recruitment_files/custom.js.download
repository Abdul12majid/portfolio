var site = (function (window, undefined) {
  function customSelectPanels() {
    var overlay = jQuery('<div id="temp-overlay"> </div>');
    var selectContainer = "[data-customSelectPanels]";
    if ($(selectContainer).length) {
      $(document).on("click", ".current-selected", function (e) {
        e.preventDefault();
        overlay.appendTo(document.body)
        $(this).next().toggle();
        $(this).toggleClass('active');

      });
      $(document).on("click", "#temp-overlay", function (e) {
        e.preventDefault();
        overlay.remove()
        $(".current-selected.active").next().toggle();
        $(".current-selected.active").toggleClass('active');
      });
      $(document).on("mouseover", "#temp-overlay", function (e) {
        e.preventDefault();
        overlay.remove()
        $(".current-selected.active").next().toggle();
        $(".current-selected.active").toggleClass('active');
      });

      $(document).on("click", ".list-of-options li", function (e) {
        e.preventDefault();
        overlay.remove()
        var selectthis = $(this).data('panel');
        var selectVal = $(this).html();
        $(".current-selected.active").removeClass('active');
        $(this).parent().closest(selectContainer).find('.current-selected').html(selectVal);
        $(this).parent().closest(selectContainer).find('.list-of-options').hide();
        $(this).parent().closest(selectContainer).find("[data-panelInfo]").fadeOut().promise().done(function () {
          $(this).parent().closest(selectContainer).find("[data-panelInfo='" + selectthis + "']").fadeIn().addClass('active');
        })
      });
    }
  }

  function typedText() {
    if ($('.typed').length) {
      var data = $('.typed').data('strings');
      console.log(data)

      $(".typed").typed({

        strings: [data[0], data[1], data[2]],
        typeSpeed: 100,
        startDelay: 0,
        backSpeed: 60,
        backDelay: 2000,
        loop: true,
        cursorChar: "|",
        contentType: 'html'
      });

    }
    $('.faux-input').on('click', function () {
      $(this).hide();
      // $(this).nextAll('input[type=text]').removeClass("hide")
      $(this).parent().find('.form-control').removeClass("hide");
      $(this).next().focus();
    })

  }


  function cmCheckHero() {
    if ($(".main").children().first().is('.cm-hero-scroller')) {
      $(".vsm-top").addClass('switch-sticky');
    }
    if ($(".main").children().first().is('.vsm-job-details') || $(".main").children().first().is('.vsm-responsive-nav')) {
      $(".vsm-top").addClass('switch-fixed');
    }
  }

  function formStyleOverride() {


    $(document).on('click', 'form .btn', function (e) {
      var $this = $(this);
      e.preventDefault();

      // console.log('ss')
      setInterval(function () {


        $this.parent().closest("form").find('.error:visible').prev('.field' || '.custom-file').addClass('required')

      }, 300)
    })

    $(document).on('.form-control:focus', function () {
      var $this = $(this);
      $this.parent().next('.error:visible').addClass('move');
    })

  }

  function textCarousel() {

    if ($(".textCarousel span").length) {
      //     var words = $(".textCarousel").find("span");

      var obj = $(".textCarousel span").attr("data-strings").trim();
      var arr1 = obj.split("/");

      for (var i = 0; i < arr1.length; i++) { // This loop for remove white space.
        arr1[i] = "<span>" + arr1[i].trim() + "</span>";
        var words = $(".textCarousel span").html(arr1)
        // console.log(arr1)
      }


      // $(function () {
      //   var container = $(".textCarousel span")
      //   // Shuffle the contents of container
      //   container.shuffleLetters();
      //   var container = $(".textCarousel span");

      //   container.shuffleLetters();

      //   function shuffle(text) {
      //       // console.log(text);
      //       // Shuffle the container with custom text
      //       container.shuffleLetters({
      //           text: text
      //       })
      //   }

      //   var arr = arr1;
      //   var i = 0;
      //   var interval = setInterval(function () {
      //       shuffle(arr[i++ % arr.length]);
      //   }, 4000);
      // });

      function fadeInOut(item) {
        item.fadeIn(800).delay(1000).fadeOut(800, function () {
          if (item.next().length) // if there is a next element
          {
            fadeInOut(item.next());
          } // use it
          else {
            fadeInOut(item.siblings(':first'));
          } // if not, then use go back to the first sibling
        });

      }

      fadeInOut(jQuery('.textCarousel span span:first-child'));
    }

  }




  function customSliders() {
    var quintuple = {
      centeredSlides: false,
      speed: 1000,
      spaceBetween: 30,
      slidesPerView: 2,
      breakpoints: {
        640: { slidesPerView: 2, },
        768: { slidesPerView: 3, },
        992: { slidesPerView: 4, },
        1024: { slidesPerView: 5, },
      }
    }

    vsmsite.vsmSwipers("update", "div.vsm-content-carousel", ".variable-slides.swiper-container", quintuple);


  }




  // explicitly return public methods when this object is instantiated
  return {
    customSelectPanels: customSelectPanels,
    typedText: typedText,
    cmCheckHero: cmCheckHero,
    textCarousel: textCarousel,
    customSliders: customSliders,
    // formStyleOverride:formStyleOverride,
    //  someOtherMethod: myOtherMethod
  };
})(window);

//  usage
site.customSelectPanels();
site.typedText();
site.cmCheckHero();
site.textCarousel();
site.customSliders();
// site.formStyleOverride();





$(document).on('ready', function () {

});




window.onload = function () {
  setTimeout(function () {
    lax.init()

    lax.addDriver(
      "scrollY",
      function () {
        return document.documentElement.scrollTop;
      },
      { frameStep: 1 }
    );


    lax.addElements(".hero-reavel .overlay", {
      scrollY: {
        //  translateY: [[0, 0, 0], [0, 0, 0]],

        opacity: [[0, "screenHeight/2", "screenHeight"], [0, 1, 1]],
      }
    });


    lax.addElements('.laxTranslateYDown', {
      scrollY: {
        translateY: [
          ["elInY", "elCenterY", "elOutY"],
          [-80, 0, 0],
        ],
      }
    });
    lax.addElements('.laxTranslateYUp', {
      scrollY: {
        translateY: [
          ["elInY", "elCenterY", "elOutY"],
          [80, 0, 0],
        ],
      }
    });
    lax.addElements('.laxScale', {
      scrollY: {
        scale: [
          ["elInY", "elOutY"],
          [1.2, 1],
        ]
      }
    });
    lax.addElements('.laxFadeIn', {
      scrollY: {
        opacity: [
          [0, 100],
          [0, 1],
        ]
      }
    });

    lax.addElements(".cm-content-image-edge-aligned .media img.rotate", {
      scrollY: {
        rotate: [["elInY", "elOutY"], [0, 45]],
        // translateX: [["elInY", "elOutY"], [300, -100]],

      }
    });



    lax.addElements(".cm-content-image-edge-aligned .media img.left-to-right", {
      scrollY: {
        translateX: [["elInY", "elOutY"], [-300, 50]],

        // translateX: [[0, "screenHeight"], [0, -400]],

      }
    });

    lax.addElements(".gfx i", {
      scrollY: {
        rotate: [["elInY", "elOutY"], [0, 45]],

        // translateX: [[0, "screenHeight"], [0, -400]],

      }
    });

    lax.addElements(".vsm-content-in-image-50-50.grouped-island .ufo", {
      scrollY: {
        translateX: [["elInY", "elOutY"], [-300, 200]],
        translateY: [["elInY", "elOutY"], [0, 200]],

        // translateX: [[0, "screenHeight"], [0, -400]],

      }
    });
    lax.addElements(".cm-content-image-edge-aligned .media img.star", {
      scrollY: {
        translateX: [["elInY", "elOutY"], [-150, -300]],
        translateY: [["elInY", "elOutY"], [-100, 300]],
        // translateX: [[0, "screenHeight"], [0, -400]],

      }
    });
    // lax.addElements(".cm-content-image-edge-aligned .media img.float", {
    //   scrollY: {
    //     translateY: [
    //       ["elInY", "elOutY"],
    //       [0, 30]
    //     ],

    //   }
    // });
    lax.addElements('.follow-scale-image', {
      scrollY: {
        translateY: [
          ["elInY", "elOutY"],
          [0, -100]
        ],
        scale: [
          ["elInY", "elOutY"],
          [1, 1.1]
        ],
        opacity: [
          ["elInY", "elOutY"],
          [0.5, 1]
        ],
      }
    })

    lax.addElements('.follow-text', {
      scrollY: {
        translateY: [
          ["elInY", "elOutY"],
          [0, 100]
        ],

      }
    })

    lax.addElements('.follow-image', {
      scrollY: {
        translateY: [
          ["elInY", "elOutY"],
          [0, -100]
        ],

      }
    })
  }, 1000)
}
